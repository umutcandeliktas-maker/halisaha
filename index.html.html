<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Halƒ±saha Takƒ±m Kurucu</title>

  <!-- PWA -->
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#1e7f43" />

  <style>
    body {
      margin: 0;
      font-family: Arial, Helvetica, sans-serif;
      background: #0f5132;
      color: #fff;
    }

    header {
      padding: 15px;
      text-align: center;
      background: #1e7f43;
      font-size: 20px;
      font-weight: bold;
    }

    .container {
      padding: 10px;
      max-width: 900px;
      margin: auto;
    }

    button {
      padding: 10px 14px;
      margin: 5px 2px;
      border: none;
      border-radius: 6px;
      background: #ffc107;
      font-weight: bold;
      cursor: pointer;
    }

    button.danger {
      background: #dc3545;
      color: #fff;
    }

    input, select {
      padding: 6px;
      margin: 2px;
      border-radius: 4px;
      border: none;
    }

    .player {
      background: #198754;
      padding: 8px;
      border-radius: 6px;
      margin-bottom: 6px;
    }

    .field {
      background: #198754;
      border-radius: 10px;
      padding: 10px;
      margin-top: 15px;
    }

    .line {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin: 10px 0;
    }

    .card {
      background: #fff;
      color: #000;
      padding: 6px 8px;
      border-radius: 6px;
      min-width: 70px;
      text-align: center;
      font-size: 13px;
    }

    .name { font-weight: bold; }
    .pos { font-size: 12px; }

    @media (max-width: 600px) {
      .card { min-width: 60px; font-size: 12px; }
    }
  </style>
</head>
<body>

<header>‚öΩ Halƒ±saha Takƒ±m Kurucu</header>

<div class="container">

  <h3>Oyuncular</h3>
  <div id="players"></div>

  <button onclick="addPlayer()">‚ûï Oyuncu Ekle</button>
  <button class="danger" onclick="removePlayer()">‚ûñ Oyuncu Sil</button>

  <hr>

  <button onclick="createTeams()">üèüÔ∏è Takƒ±m Olu≈ütur</button>

  <div id="teams"></div>
</div>

<script>
let players = JSON.parse(localStorage.getItem('players')) || [];

function save() {
  localStorage.setItem('players', JSON.stringify(players));
}

function renderPlayers() {
  const div = document.getElementById('players');
  div.innerHTML = '';

  players.forEach((p, i) => {
    div.innerHTML += `
      <div class="player">
        <input placeholder="ƒ∞sim" value="${p.name}" onchange="players[${i}].name=this.value;save()">
        <label><input type="checkbox" ${p.pos.includes('GK')?'checked':''} onchange="toggle(${i},'GK')">GK</label>
        <label><input type="checkbox" ${p.pos.includes('DEF')?'checked':''} onchange="toggle(${i},'DEF')">DEF</label>
        <label><input type="checkbox" ${p.pos.includes('MID')?'checked':''} onchange="toggle(${i},'MID')">MID</label>
        <label><input type="checkbox" ${p.pos.includes('FWD')?'checked':''} onchange="toggle(${i},'FWD')">FWD</label>
        <select onchange="players[${i}].power=this.value;save()">
          <option ${p.power==1?'selected':''} value="1">1</option>
          <option ${p.power==2?'selected':''} value="2">2</option>
          <option ${p.power==3?'selected':''} value="3">3</option>
          <option ${p.power==4?'selected':''} value="4">4</option>
          <option ${p.power==5?'selected':''} value="5">5</option>
        </select>
      </div>`;
  });
}

function toggle(i, pos) {
  const arr = players[i].pos;
  players[i].pos = arr.includes(pos) ? arr.filter(x=>x!==pos) : [...arr,pos];
  save();
}

function addPlayer() {
  players.push({name:'',pos:[],power:3});
  save();
  renderPlayers();
}

function removePlayer() {
  players.pop();
  save();
  renderPlayers();
}

function shuffle(a){return a.sort(()=>Math.random()-0.5)}

function createTeams() {
  const list = shuffle([...players]);
  const mid = Math.floor(list.length/2);
  const t1 = list.slice(0,mid);
  const t2 = list.slice(mid);

  document.getElementById('teams').innerHTML = teamHTML('Takƒ±m A',t1)+teamHTML('Takƒ±m B',t2);
}

function teamHTML(title, team) {
  const lines = {GK:[],DEF:[],MID:[],FWD:[]};
  team.forEach(p=>{
    const pos = p.pos.includes('GK')?'GK':p.pos.includes('DEF')?'DEF':p.pos.includes('MID')?'MID':'FWD';
    lines[pos].push(p);
  });

  let html = `<h3>${title}</h3><div class="field">`;
  ['GK','DEF','MID','FWD'].forEach(l=>{
    if(lines[l].length){
      html += '<div class="line">';
      lines[l].forEach(p=>{
        html += `<div class="card"><div class="name">${p.name}</div><div class="pos">${l}</div></div>`;
      });
      html += '</div>';
    }
  });
  html += '</div>';
  return html;
}

renderPlayers();
</script>

</body>
</html>