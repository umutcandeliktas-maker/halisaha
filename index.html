<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>Taktik Pro v11.6</title>
<script src="https://cdn.tailwindcss.com"></script>

<style>
:root { --field-bg:#032b13 }
body { background:#020617;color:white }
.field{
    position:relative;width:1100px;height:650px;margin:auto;
    background:radial-gradient(circle,#064d23,#021a0b);
    border:5px solid white;border-radius:15px
}
.player{
    position:absolute;width:120px;padding:8px;border-radius:12px;
    font-weight:bold;color:black;text-align:center;
    transform:translate(-50%,-50%);
    cursor:grab;box-shadow:0 10px 20px rgba(0,0,0,.4)
}
.team-a{background:linear-gradient(135deg,#f3a616,#d48c0a)}
.team-b{background:linear-gradient(135deg,#43d1f0,#2ba5c2)}
.ball{
    position:absolute;width:40px;height:40px;background:white;
    border-radius:50%;left:50%;top:50%;
    transform:translate(-50%,-50%);
    display:flex;align-items:center;justify-content:center;
    font-size:22px;cursor:grab
}
</style>
</head>

<body class="p-6">

<div class="flex gap-3 mb-4">
<button onclick="initSquad()" class="bg-blue-600 px-4 py-2 rounded">Oyuncuları Yükle</button>
<button onclick="applyTactics()" class="bg-green-600 px-4 py-2 rounded">Sahaya Diz</button>
</div>

<div id="pList" class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-3 mb-6"></div>

<div id="canvas" class="field">
<div id="top" class="ball">⚽</div>
</div>

<script>
let players=[];

const POSITIONS=["GK","DEF","MID","FWD"];

const tacts={
"3-1-2":[
{x:7,y:50},{x:18,y:20},{x:18,y:80},{x:28,y:50},
{x:40,y:50},{x:42,y:20},{x:42,y:80}
]
};

function initSquad(){
players=[];
for(let i=0;i<14;i++){
players.push({
id:i,
name:`Oyuncu ${i+1}`,
team:i<7?"A":"B",
positions:[]
});
}
renderUI();
}

function togglePos(i,pos,checked){
if(checked){
if(!players[i].positions.includes(pos))
players[i].positions.push(pos);
}else{
players[i].positions=
players[i].positions.filter(p=>p!==pos);
}
renderUI();
}

function renderUI(){
const c=document.getElementById("pList");
c.innerHTML=players.map((p,i)=>`
<div class="bg-slate-900 p-2 rounded-xl border border-slate-700">
<input value="${p.name}"
oninput="players[${i}].name=this.value"
class="bg-slate-950 text-white text-xs p-1 w-full rounded mb-1">

<div class="grid grid-cols-2 gap-1 text-[9px]">
${POSITIONS.map(pos=>`
<label class="flex items-center gap-1">
<input type="checkbox"
${p.positions.includes(pos)?"checked":""}
onchange="togglePos(${i},'${pos}',this.checked)">
${pos}
</label>
`).join("")}
</div>

<div class="flex flex-wrap gap-1 mt-1">
${p.positions.map(pos=>`
<span class="px-1 bg-slate-700 rounded text-[9px]">${pos}</span>
`).join("")}
</div>

<span class="text-[9px] block mt-1 ${p.team==="A"?"text-orange-400":"text-cyan-400"}">
${p.team} TAKIMI
</span>
</div>
`).join("");
}

function applyTactics(){
document.querySelectorAll(".player").forEach(p=>p.remove());

players.forEach((p,i)=>{
const idx=p.team==="A"?i:i-7;
const coord=tacts["3-1-2"][idx];
if(!coord) return;

const el=document.createElement("div");
el.className=`player ${p.team==="A"?"team-a":"team-b"}`;
el.innerHTML=`
<div>${p.name}</div>
<div class="text-[9px] opacity-70">
${p.positions[0]||""}
</div>
`;

let x=p.team==="A"?coord.x:100-coord.x;
el.style.left=(x*11)+"px";
el.style.top=(coord.y*6.5)+"px";

makeDrag(el);
document.getElementById("canvas").appendChild(el);
});
makeDrag(document.getElementById("top"));
}

function makeDrag(el){
let a=false,sx,sy,ix,iy;
el.onmousedown=e=>{
a=true;sx=e.clientX;sy=e.clientY;
ix=el.offsetLeft;iy=el.offsetTop;
};
window.onmousemove=e=>{
if(!a)return;
el.style.left=(ix+e.clientX-sx)+"px";
el.style.top=(iy+e.clientY-sy)+"px";
};
window.onmouseup=()=>a=false;
}
</script>
</body>
</html>
